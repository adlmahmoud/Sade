{{define "albums"}}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Albums de Sade</title>
    <link rel="stylesheet" href="/static/css/global.css">
    <link rel="stylesheet" href="/static/css/albums_sade.css">
</head>
<body class="page--albums">
    <div class="page-shell">
        <header class="page-header">
            <div>
                <div class="page-title">Albums</div>
                <p class="page-subtitle">Une discographie à explorer lentement, morceau après morceau.</p>
            </div>
            <nav class="page-nav">
                <a href="/">Artiste</a>
                <a href="/albums" class="is-primary">Albums</a>
                <a href="/best_track?id=47zz7sob9NUcODy0BTDvKx">Meilleurs titres</a>
            </nav>
        </header>

        <main>
            <section class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Discographie</div>
                        <p class="meta text-muted">Total albums : {{.Total}} &mdash; Limite : {{.Limit}} &mdash; Offset : {{.Offset}}</p>
                    </div>
                </div>

                <div class="table-shell" id="albums-table">
                    <table>
        <thead>
            <tr>
                <th>Pochette</th>
                <th>Nom</th>
                <th>Type</th>
                <th>Nombre de pistes</th>
                <th>Date de sortie</th>
                <th>Lien Spotify</th>
            </tr>
        </thead>
        <tbody>
            {{range .Items}}
            {{/* On mémorise le nom de l'album pour l'utiliser dans l'alt */}}
            {{$name := .Name}}
            <tr>
                <td>
                    {{if gt (len .Images) 0}}
                        {{with index .Images 0}}
                            <img src="{{.URL}}" alt="{{$name}} cover">
                        {{end}}
                    {{end}}
                </td>
                <td>{{.Name}}</td>
                <td>{{.AlbumType}}</td>
                <td>{{.TotalTracks}}</td>
                <td>{{.ReleaseDate}}</td>
                <td>
                    <a href="{{.Href}}" target="_blank" rel="noopener noreferrer">
                        Ouvrir dans Spotify
                    </a>
                </td>
            </tr>
            {{end}}
        </tbody>
                    </table>
                </div>
            </section>
        </main>

        <footer style="margin-top: 18px; text-align: left;">
            <a href="/" class="link-ghost">&#8592; Retour à l'accueil</a>
        </footer>
    </div>

    <script src="/static/js/albums_sade.js" defer></script>
</body>
</html>
{{end}}
